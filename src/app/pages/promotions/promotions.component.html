<app-nav></app-nav>

<ion-content class="background-app">
	<div class="container mt-5">
		<h1 class="text-start pt-5">Promociones</h1>
		<div class="container-fluid d-flex flex-column mt-3">
			<ion-grid>
				<ion-row>
					<ion-col class="d-flex my-3">
						<ion-button class="mx-auto text-white" (click)="create = !create">
							Crear Promoción
						</ion-button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</div>
	</div>
</ion-content>

<ion-modal [backdropDismiss]="false" [isOpen]="create">
	<ng-template>
		<ion-toolbar class="back fixed-top" style="background-color: black;">
			<ion-button (click)="create = !create" class="ms-3" style="--background : #ff9600;">
				<ion-icon slot="icon-only" class="text-white" name="arrow-back-outline"></ion-icon>
			</ion-button>
		</ion-toolbar>

		<ion-content class="background-modal">
			<br>
			<ion-row>
				<ion-col class="text-center mt-5">
					<h3>Crear nueva Promoción</h3>
				</ion-col>
			</ion-row>
			<form [formGroup]="promoForm">
				<ion-list lines="none">
					<ion-item>
						<ion-input formControlName="name" type="text" placeholder="Nombre de la promoción"
							class="bg-white my-2"></ion-input>
					</ion-item>
					<div style="display: flex; align-items: center; justify-content: center;">
						<ion-radio-group [allowEmptySelection]="true" [(ngModel)]="itemSelected"
							(ionChange)="selectItemsForPromo($event);">
							<ion-row>
								<ion-col>
									<ion-item>
										<ion-radio slot="end" value="products" name="chk_items"></ion-radio>
										<ion-label name="chk_items">Productos</ion-label>
									</ion-item>
								</ion-col>
								<ion-col>
									<ion-item>
										<ion-radio slot="end" value="catgs"></ion-radio>
										<ion-label>Categorias</ion-label>
									</ion-item>
								</ion-col>
							</ion-row>
						</ion-radio-group>
					</div>
					<ion-item>
						<ion-col class="d-flex justify-content-center">
							<ion-button id="select-fruits" [disabled]="!itemSelected">Seleccionar</ion-button>
						</ion-col>
						<ion-modal trigger="select-fruits" #modal>
							<ng-template>
								<app-head-promos class="ion-page" title="Seleccionar "
									[items]="itemSelected == 'products' ? products : categories"
									[selectedItems]="selectedProducts" (selectionChange)="promoSelectionChanged($event)"
									(selectionCancel)="modal.dismiss()"></app-head-promos>
							</ng-template>
						</ion-modal>
					</ion-item>
					<ion-item>
						<ion-col class="d-flex justify-content-center">
							<ion-label>¿Agrega adicionales?</ion-label>
						</ion-col>
						<ion-col>
							<ion-toggle slot="end"></ion-toggle>
						</ion-col>
					</ion-item>
					<ion-item class="mt-4">
						<ion-col class="d-flex justify-content-center">
							<h5 class="text-center">Seleccionar días y horarios para la promoción</h5>
						</ion-col>
					</ion-item>
					<ion-item>
						<ion-label class="me-5">Día</ion-label>
						<ion-label class="ms-5" style="    margin-left: 130px!important;">Inicio</ion-label>
						<ion-label>Termina</ion-label>
						<ion-label class="ms-5">Activa</ion-label>
					</ion-item>

					<ion-list>
						<ion-item *ngFor="let item of dias">
							<ion-label slot="start" style="width: 30px;">{{item.name}}</ion-label>
							<ion-select (ionChange)=" assign(item.name,$event,'OPEN')" class="me-5" [value]="item.open"
								placeholder="Abierto">
								<ion-select-option value="0:00">0:00</ion-select-option>
								<ion-select-option value="1:00">1:00</ion-select-option>
								<ion-select-option value="2:00">2:00</ion-select-option>
								<ion-select-option value="3:00">3:00</ion-select-option>
								<ion-select-option value="4:00">4:00</ion-select-option>
								<ion-select-option value="5:00">5:00</ion-select-option>
								<ion-select-option value="6:00">6:00</ion-select-option>
								<ion-select-option value="7:00">7:00</ion-select-option>
								<ion-select-option value="8:00">8:00</ion-select-option>
								<ion-select-option value="9:00">9:00</ion-select-option>
								<ion-select-option value="10:00">10:00</ion-select-option>
								<ion-select-option value="11:00">11:00</ion-select-option>
								<ion-select-option value="12:00">12:00</ion-select-option>
								<ion-select-option value="13:00">13:00</ion-select-option>
								<ion-select-option value="14:00">14:00</ion-select-option>
								<ion-select-option value="15:00">15:00</ion-select-option>
								<ion-select-option value="16:00">16:00</ion-select-option>
								<ion-select-option value="17:00">17:00</ion-select-option>
								<ion-select-option value="18:00">18:00</ion-select-option>
								<ion-select-option value="19:00">19:00</ion-select-option>
								<ion-select-option value="20:00">20:00</ion-select-option>
								<ion-select-option value="21:00">21:00</ion-select-option>
								<ion-select-option value="22:00">22:00</ion-select-option>
								<ion-select-option value="23:00">23:00</ion-select-option>
							</ion-select>

							<ion-select (ionChange)=" assign(item.name,$event,'CLOSE')" [value]="item.close"
								placeholder="Abierto">
								<ion-select-option value="0:00">0:00</ion-select-option>
								<ion-select-option value="1:00">1:00</ion-select-option>
								<ion-select-option value="2:00">2:00</ion-select-option>
								<ion-select-option value="3:00">3:00</ion-select-option>
								<ion-select-option value="4:00">4:00</ion-select-option>
								<ion-select-option value="5:00">5:00</ion-select-option>
								<ion-select-option value="6:00">6:00</ion-select-option>
								<ion-select-option value="7:00">7:00</ion-select-option>
								<ion-select-option value="8:00">8:00</ion-select-option>
								<ion-select-option value="9:00">9:00</ion-select-option>
								<ion-select-option value="10:00">10:00</ion-select-option>
								<ion-select-option value="11:00">11:00</ion-select-option>
								<ion-select-option value="12:00">12:00</ion-select-option>
								<ion-select-option value="13:00">13:00</ion-select-option>
								<ion-select-option value="14:00">14:00</ion-select-option>
								<ion-select-option value="15:00">15:00</ion-select-option>
								<ion-select-option value="16:00">16:00</ion-select-option>
								<ion-select-option value="17:00">17:00</ion-select-option>
								<ion-select-option value="18:00">18:00</ion-select-option>
								<ion-select-option value="19:00">19:00</ion-select-option>
								<ion-select-option value="20:00">20:00</ion-select-option>
								<ion-select-option value="21:00">21:00</ion-select-option>
								<ion-select-option value="22:00">22:00</ion-select-option>
								<ion-select-option value="23:00">23:00</ion-select-option>
							</ion-select>
							<ion-toggle [(ngModel)]="item.active" slot="end"></ion-toggle>
						</ion-item>
						<div style="display: flex; align-items: center; justify-content: center;">
							<ion-radio-group [allowEmptySelection]="true" [(ngModel)]="priceSelected">
								<ion-row>
									<ion-col>
										<ion-item>
											<ion-radio slot="end" value="precio" name="rd_price"></ion-radio>
											<ion-label name="chk_items">Precio</ion-label>
										</ion-item>
									</ion-col>
									<ion-col>
										<ion-item>
											<ion-radio slot="end" value="porcentaje"></ion-radio>
											<ion-label>Porcentaje</ion-label>
										</ion-item>
									</ion-col>
								</ion-row>
							</ion-radio-group>
						</div>
						<ion-item>
							<ion-input formControlName="name" type="text" placeholder=""
								class="bg-white my-2"></ion-input>
						</ion-item>
						<div class="text-center mt-5">
							<ion-button style="color:white!important;" shape="round"
								style="--background: #ff9600;">
								Guardar
							</ion-button>
						</div>
					</ion-list>
				</ion-list>
			</form>
		</ion-content>
	</ng-template>
</ion-modal>